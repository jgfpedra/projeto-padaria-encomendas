{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
<head>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/encomenda.css') }}">
  <script src="{{ url_for('static', filename='js/lancamento_historico_encomendas.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/lancamento_finalizar_encomendas.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/lancamento_salvar_encomendas.js') }}" defer></script>
</head>
<body>
  <div class="button-container">
    <button>Pesquisar</button>
    <button>Imprimir</button>
    <button>Deletar</button>
    <button>Estornar</button>
    <button>Finalizar</button>
    <button>Relatório</button>
    <button>Historico</button>
  </div>
  
  <!-- Second division with grids --> 
  <div class="main-grid">
    <!-- First grid (3 sections) -->
    <div class="info-grid">
      <!-- Order Information -->
      <div class="order-info">
        <h3>Informações do Pedido</h3>
        <label>Loja: <span>{{ encomenda.loja }}</span></label>
        <label>Número Venda: <span>{{ encomenda.numero_venda }}</span></label>
        <label>Data e Hora Criação: <span>{{ encomenda.data_hora_criacao.strftime('%d/%m/%Y %H:%M') }}</span></label>
        <label>Situação: <span>{{ encomenda.situacao }}</span></label>
        <label>Data Encomenda: <span>{{ encomenda.data_encomenda.strftime('%d/%m/%Y') }}</span></label>
        <label>Hora Encomenda: <span>{{ encomenda.hora_encomenda.strftime('%H:%M') }}</span></label>
      </div>

      <!-- Client Information -->
      <div class="client-info">
        <h3>Informações do Cliente</h3>
        <label>Código: <span>{{ cliente.codigo }}</span></label>
        <label>Nome: <span>{{ cliente.nome }}</span></label>
        <label>Telefone: <span>{{ cliente.telefone }}</span></label>
        <label>Município: <span>{{ cliente.municipio }}</span></label>
        <label>Cidade: <span>{{ cliente.cidade }}</span></label>
        <label>Bairro: <span>{{ cliente.bairro }}</span></label>
        <label>Endereço: <span>{{ cliente.endereco }}</span></label>
        <label>Número: <span>{{ cliente.numero }}</span></label>
        <label>Complemento: <span>{{ cliente.complemento }}</span></label>
        <label>Observação: <span>{{ cliente.observacao }}</span></label>
      </div>

      <!-- Products Information -->
      <div class="product-info">
        <h3>Produtos no Pedido</h3>
        <table>
          <thead>
            <tr>
              <th>Código</th>
              <th>Descrição</th>
              <th>Quantidade</th>
              <th>Preço Venda</th>
              <th>Preço Total</th>
              <th>Setor</th>
              <th>Observação</th>
            </tr>
          </thead>
          <tbody>
            {% for item in itens %}
            <tr>
              <td>{{ item.codigo }}</td>
              <td>{{ item.descricao }}</td>
              <td>{{ item.quantidade }}</td>
              <td>R$ {{ item.preco_venda }}</td>
              <td>R$ {{ item.preco_total }}</td>
              <td>{{ item.setor }}</td>
              <td>{{ item.observacao }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Second grid (totals and telephone) -->
    <div class="totals-grid">
      <div class="telephone-input">
        <label>Telefone: <input type="text" name="telefone" placeholder="Digite o telefone" value="{{ telefone }}"></label>
      </div>
      <div class="totals-info">
        <label>Subtotal: <span>R$ {{ subtotal }}</span></label>
        <label>Valor Entrega: <span>R$ {{ valor_entrega }}</span></label>
        <label>Desconto: <span>R$ {{ desconto }}</span></label>
        <label>Total: <span>R$ {{ total }}</span></label>
      </div>
    </div>

    <div class="button-grid">
      <div class="popup-container-salvar">
        <button onclick="showPopup()">Salvar</button>
      </div>
      <div id="popup-container-salvar"></div>
      <button onclick="exitOrder()">Sair</button>
    </div>
  </div>
</body>
{% endblock %}
